<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="/assets/css/font-awesome.css"/>

    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="/assets/css/ace-fonts.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-part2.css" class="ace-main-stylesheet"/>
    <![endif]-->

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-ie.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="/assets/js/ace-extra.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="/assets/js/html5shiv.js"></script>
    <script src="/assets/js/respond.js"></script>
    <![endif]-->

    <script src="/webjars/jquery/3.1.0/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/1.0.2/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/2.3.3/stomp.min.js"></script>

    <title>12345系统案件监控系统</title>
</head>


<body class="no-skin">
<div class="main-container ace-save-state" id="main-container">
    <div class="row">
        <div class="col-xs-12">
            <div class="row">
                <div class="space-6"></div>
                <div class="col-sm-12 infobox-container">
                    <div class="infobox infobox-red">
                        <div class="infobox-icon">
                            <i class="ace-icon fa fa-file"></i>
                        </div>
                        <div class="infobox-data">
                            <span class="infobox-data-number" id="yesswCount">32</span>
                            <div class="infobox-content">12345剩余案件数</div>
                        </div>

                        <div class="stat stat-success"></div>
                    </div>

                    <div class="infobox infobox-blue">
                        <div class="infobox-icon">
                            <i class="ace-icon fa fa-file"></i>
                        </div>

                        <div class="infobox-data">
                            <span class="infobox-data-number">11</span>
                            <div class="infobox-content">96010剩余案件数</div>
                        </div>

                        <!--<div class="badge badge-success">
                            +32%
                            <i class="ace-icon fa fa-arrow-up"></i>
                        </div>-->
                    </div>

                    <div class="infobox infobox-pink">
                        <div class="infobox-icon">
                            <i class="ace-icon fa fa-file-audio-o"></i>
                        </div>

                        <div class="infobox-data">
                            <span class="infobox-data-number">8</span>
                            <div class="infobox-content">城管系统案件数</div>
                        </div>
                    </div>

                    <div class="infobox infobox-green">
                        <div class="infobox-icon">
                            <i class="ace-icon fa fa-flask"></i>
                        </div>
                        <div class="infobox-data">
                            <span class="infobox-data-number">7</span>
                            <div class="infobox-content">已结案数</div>
                        </div>
                    </div>
                </div>
                <div class="vspace-12-sm"></div>
            </div><!-- /.row -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="widget-box transparent">
                        <div class="widget-header widget-header-flat">
                            <h4 class="widget-title lighter">
                                <i class="ace-icon fa fa-star orange"></i>
                                异常状况监控
                            </h4>
                            <div class="widget-toolbar">
                                <a href="#" data-action="collapse">
                                    <i class="ace-icon fa fa-chevron-up"></i>
                                </a>
                            </div>
                        </div>

                        <div class="widget-body">
                            <div class="widget-main no-padding">
                                <table class="table table-bordered table-striped">
                                    <thead class="thin-border-bottom">
                                    <tr>
                                        <th>
                                            状况描述
                                        </th>
                                        <th>
                                            紧急状况
                                        </th>

                                        <th class="hidden-480">
                                            详情
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>1、12345接口异常（或者两个小时之内没有数据）</td>
                                        <td>
                                            <small>
                                                <b class="red">高</b>
                                            </small>
                                        </td>
                                        <td class="hidden-480">
                                            <span class="label label-success arrowed-right arrowed-in">正常</span>
                                            <span class="label label-danger arrowed-right arrowed-in">异常</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2、推送城管系统后未能获取到城管案件编号</td>
                                        <td>
                                            <b class="orange">中</b>
                                        </td>
                                        <td class="hidden-480" id="">
                                            <span class="label label-warning arrowed arrowed-right">
                                                <a href="javascript:void(0)">1821044444</a>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            3、案件快到截止日期
                                        </td>
                                        <td>
                                            <b class="red">高</b>
                                        </td>
                                        <td class="hidden-480">
                                        <span class="label label-danger arrowed">
                                        <a href="javascript:void(0)">案件数3</a>
                                        </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>4、12345退回接口异常（回退失败）（城管推送12345接口）</td>
                                        <td>
                                            <small>
                                                <b class="red">高</b>
                                            </small>
                                        </td>

                                        <td class="hidden-480">
                                                <span class="label">
                                                    <s>out of stock</s>
                                                </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>5、12345已经结案，未发通知</td>

                                        <td>
                                            <b class="orange">中</b>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-warning arrowed arrowed-right">SOLD</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>6、案件派错预警</td>

                                        <td>
                                            <b class="orange">高</b>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-warning arrowed arrowed-right">SOLD</span>
                                        </td>
                                    </tr>


                                    </tbody>
                                </table>
                            </div><!-- /.widget-main -->
                        </div><!-- /.widget-body -->
                    </div><!-- /.widget-box -->
                </div><!-- /.col -->
            </div><!-- /.row -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="widget-box">
                        <div class="widget-header">
                            <h4 class="widget-title lighter smaller">
                                <i class="ace-icon fa fa-comment blue"></i>
                                接口信息监控
                            </h4>
                        </div>
                        <iframe src="screen.html" width="100%" height="250px" frameborder="no" border="0"
                                marginwidth="0" marginheight="0" allowtransparency="yes">
                        </iframe>
                    </div><!-- /.widget-box -->
                </div><!-- /.col -->

            </div><!-- /.row -->

            <!-- PAGE CONTENT ENDS -->
        </div><!-- /.col -->
    </div><!-- /.row -->
</div>


<!-- basic scripts -->

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery.js'>" + "<" + "/script>");
</script>
<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery1x.js'>" + "<" + "/script>");
</script>
<![endif]-->

<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='/assets/js/jquery.mobile.custom.js'>" + "<" + "/script>");

    $(function () {
        var Sys = {};
        var ua = navigator.userAgent.toLowerCase();
        if (window.ActiveXObject) {
            Sys.ie = ua.match(/msie ([\d.]+)/)[1];
            if (Sys.ie <= 9) {
                $('#ie_lt9_alert').css({'display': 'block'});  //浏览器版本太旧提示。
            }
        }
    });

</script>
<script type="text/javascript">

    var stompClient = null
    var i = 0;

    $(function () {
        var socket = new SockJS('/wsMonitor');
        stompClient= Stomp.over(socket);
        stompClient.connect({},function (frame) {
            console.log('Connected: ' + frame);
            stompClient.subscribe('/topic/callback', function (result) {
                console.log(result.body);
                var json = JSON.parse(result.body);
                var data = $.parseJSON( json.content );
                var type = data.data.type;
                var count = data.data.count;
                if (type == "1") {
                    //12345的案件数量
                    $("#yesswCount").text(count);
                }
                //showContent(JSON.parse(result.body));
            });
        })
    });
    var showContent = function (data){
        //$("#iframe").contents().find("#notice").after("<li id='ranks"+i+"'>行号：" + i++ + "运行内容:" + data.content + "运行时间："+new Date(data.time).toLocaleString()+"</li>");

    }


</script>



<script src="/assets/js/bootstrap.js"></script>

<!-- ace scripts -->
<script src="/assets/js/ace/elements.scroller.js"></script><!--不能删除-->
<script src="/assets/js/ace/elements.colorpicker.js"></script><!--颜色选择器：皮肤更换会用到-->

<script src="/assets/js/ace/elements.fileinput.js"></script><!--Bootstrap 的文件上传，可删除-->
<script src="/assets/js/ace/elements.typeahead.js"></script>
<!--Bootstrap 中的 Typeahead 组件就是通常所说的自动完成 AutoComplete，可删除-->
<script src="/assets/js/ace/elements.wysiwyg.js"></script><!--所见即所得，可删除-->
<script src="/assets/js/ace/elements.spinner.js"></script><!--可删除-->
<script src="/assets/js/ace/elements.treeview.js"></script><!--可删除：树视图：无关菜单-->
<script src="/assets/js/ace/elements.wizard.js"></script><!--可删除-->
<script src="/assets/js/ace/elements.aside.js"></script><!--可删除-->

<script src="/assets/js/ace/ace.js"></script>
<script src="/assets/js/ace/ace.ajax-content.js"></script><!--可删除-->
<script src="/assets/js/ace/ace.touch-drag.js"></script><!--可删除-->
<script src="/assets/js/ace/ace.sidebar.js"></script><!--侧栏菜单控制：关闭隐藏-->
<script src="/assets/js/ace/ace.sidebar-scroll-1.js"></script><!--侧栏菜单相关：简洁版菜单会用到-->
<script src="/assets/js/ace/ace.submenu-hover.js"></script><!--侧栏菜单相关-->
<script src="/assets/js/ace/ace.widget-box.js"></script><!--可删除-->
<script src="/assets/js/ace/ace.settings.js"></script><!--设置：不能删除-->
<script src="/assets/js/ace/ace.settings-rtl.js"></script><!--设置：不能删除-->
<script src="/assets/js/ace/ace.settings-skin.js"></script><!--设置皮肤：不能删除-->
<script src="/assets/js/ace/ace.widget-on-reload.js"></script><!--可删除-->
<script src="/assets/js/ace/ace.searchbox-autocomplete.js"></script><!--可删除-->

<!-- inline scripts related to this page -->
<style type="text/css">
    div.page-content {
        padding: 0px;
        margin: 0px;
        padding-left: 0px; /*padding-left: 18px;*/
    }

    #main_iframe {
        margin: 0px;
        padding: 0px;
        position: relative;
        left: 0px;
        top: 0px;
        width: 100%;
        border: 1px solid #ccc;
        overflow: hidden;
    }

    div.quick-nav {
        border-bottom: 1px solid #ccc;
        padding: 6px 3px 7px 3px;
        text-align: center;
        color: #439251;
        background-color: #ffc26c; /*绿87b87f  黄ffc26c*/
    }

    #sidebar-collapse {
        color: red;
    }
</style>

</body>
</html>
