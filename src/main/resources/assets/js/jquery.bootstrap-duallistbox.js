(function(V,O,F,T){var E="bootstrapDualListbox",A={bootstrap2Compatible:false,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:true,preserveSelectionOnMove:false,selectedListLabel:false,nonSelectedListLabel:false,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:true,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:false,buttonClass:"btn-white btn-bold"},R=/android/i.test(navigator.userAgent.toLowerCase());function N(X,Y){this.element=V(X);this.settings=V.extend({},A,Y);this._defaults=A;this._name=E;this.init()}function L(X){X.element.trigger("change")}function Q(X){X.element.find("option").each(function(a,Z){var Y=V(Z);if(typeof(Y.data("original-index"))==="undefined"){Y.data("original-index",X.elementCount++)}if(typeof(Y.data("_selected"))==="undefined"){Y.data("_selected",false)}})}function U(Y,X,Z){Y.element.find("option").each(function(c,b){var a=V(b);if(a.data("original-index")===X){a.prop("selected",Z)}})}function W(X,Y){return X.replace(/\{(\d+)\}/g,function(Z,a){return typeof Y[a]!=="undefined"?Y[a]:Z})}function C(Z){if(!Z.settings.infoText){return}var a=Z.elements.select1.find("option").length,b=Z.elements.select2.find("option").length,Y=Z.element.find("option").length-Z.selectedElements,c=Z.selectedElements,X="";if(Y===0){X=Z.settings.infoTextEmpty}else{if(a===Y){X=W(Z.settings.infoText,[a,Y])}else{X=W(Z.settings.infoTextFiltered,[a,Y])}}Z.elements.info1.html(X);Z.elements.box1.toggleClass("filtered",!(a===Y||Y===0));if(c===0){X=Z.settings.infoTextEmpty}else{if(b===c){X=W(Z.settings.infoText,[b,c])}else{X=W(Z.settings.infoTextFiltered,[b,c])}}Z.elements.info2.html(X);Z.elements.box2.toggleClass("filtered",!(b===c||c===0))}function S(X){X.selectedElements=0;X.elements.select1.empty();X.elements.select2.empty();X.element.find("option").each(function(a,Z){var Y=V(Z);if(Y.prop("selected")){X.selectedElements++;X.elements.select2.append(Y.clone(true).prop("selected",Y.data("_selected")))}else{X.elements.select1.append(Y.clone(true).prop("selected",Y.data("_selected")))}});if(X.settings.showFilterInputs){M(X,1);M(X,2)}C(X)}function M(Y,X){if(!Y.settings.showFilterInputs){return}D(Y,X);Y.elements["select"+X].empty().scrollTop(0);var Z=new RegExp(V.trim(Y.elements["filterInput"+X].val()),"gi"),a=Y.element;if(X===1){a=a.find("option").not(":selected")}else{a=a.find("option:selected")}a.each(function(d,c){var b=V(c),e=true;if(c.text.match(Z)||(Y.settings.filterOnValues&&b.attr("value").match(Z))){e=false;Y.elements["select"+X].append(b.clone(true).prop("selected",b.data("_selected")))}Y.element.find("option").eq(b.data("original-index")).data("filtered"+X,e)});C(Y)}function D(Y,X){Y.elements["select"+X].find("option").each(function(b,a){var Z=V(a);Y.element.find("option").eq(Z.data("original-index")).data("_selected",Z.prop("selected"))})}function H(X){X.find("option").sort(function(Y,Z){return(V(Y).data("original-index")>V(Z).data("original-index"))?1:-1}).appendTo(X)}function G(X){X.elements.select1.find("option").each(function(){X.element.find("option").data("_selected",false)})}function K(X){if(X.settings.preserveSelectionOnMove==="all"&&!X.settings.moveOnSelect){D(X,1);D(X,2)}else{if(X.settings.preserveSelectionOnMove==="moved"&&!X.settings.moveOnSelect){D(X,1)}}X.elements.select1.find("option:selected").each(function(a,Z){var Y=V(Z);if(!Y.data("filtered1")){U(X,Y.data("original-index"),true)}});S(X);L(X);H(X.elements.select2)}function I(X){if(X.settings.preserveSelectionOnMove==="all"&&!X.settings.moveOnSelect){D(X,1);D(X,2)}else{if(X.settings.preserveSelectionOnMove==="moved"&&!X.settings.moveOnSelect){D(X,2)}}X.elements.select2.find("option:selected").each(function(a,Z){var Y=V(Z);if(!Y.data("filtered2")){U(X,Y.data("original-index"),false)}});S(X);L(X);H(X.elements.select1)}function B(X){if(X.settings.preserveSelectionOnMove==="all"&&!X.settings.moveOnSelect){D(X,1);D(X,2)}else{if(X.settings.preserveSelectionOnMove==="moved"&&!X.settings.moveOnSelect){D(X,1)}}X.element.find("option").each(function(a,Z){var Y=V(Z);if(!Y.data("filtered1")){Y.prop("selected",true)}});S(X);L(X)}function J(X){if(X.settings.preserveSelectionOnMove==="all"&&!X.settings.moveOnSelect){D(X,1);D(X,2)}else{if(X.settings.preserveSelectionOnMove==="moved"&&!X.settings.moveOnSelect){D(X,2)}}X.element.find("option").each(function(a,Z){var Y=V(Z);if(!Y.data("filtered2")){Y.prop("selected",false)}});S(X);L(X)}function P(X){X.elements.form.submit(function(Y){if(X.elements.filterInput1.is(":focus")){Y.preventDefault();X.elements.filterInput1.focusout()}else{if(X.elements.filterInput2.is(":focus")){Y.preventDefault();X.elements.filterInput2.focusout()}}});X.element.on("bootstrapDualListbox.refresh",function(Z,Y){X.refresh(Y)});X.elements.filterClear1.on("click",function(){X.setNonSelectedFilter("",true)});X.elements.filterClear2.on("click",function(){X.setSelectedFilter("",true)});X.elements.moveButton.on("click",function(){K(X)});X.elements.moveAllButton.on("click",function(){B(X)});X.elements.removeButton.on("click",function(){I(X)});X.elements.removeAllButton.on("click",function(){J(X)});X.elements.filterInput1.on("change keyup",function(){M(X,1)});X.elements.filterInput2.on("change keyup",function(){M(X,2)})}N.prototype={init:function(){this.container=V('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element);this.elements={originalSelect:this.element,box1:V(".box1",this.container),box2:V(".box2",this.container),filterInput1:V(".box1 .filter",this.container),filterInput2:V(".box2 .filter",this.container),filterClear1:V(".box1 .clear1",this.container),filterClear2:V(".box2 .clear2",this.container),label1:V(".box1 > label",this.container),label2:V(".box2 > label",this.container),info1:V(".box1 .info",this.container),info2:V(".box2 .info",this.container),select1:V(".box1 select",this.container),select2:V(".box2 select",this.container),moveButton:V(".box1 .move",this.container),removeButton:V(".box2 .remove",this.container),moveAllButton:V(".box1 .moveall",this.container),removeAllButton:V(".box2 .removeall",this.container),form:V(V(".box1 .filter",this.container)[0].form)};this.originalSelectName=this.element.attr("name")||"";var X="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,Y="bootstrap-duallistbox-selected-list_"+this.originalSelectName;this.elements.select1.attr("id",X);this.elements.select2.attr("id",Y);this.elements.label1.attr("for",X);this.elements.label2.attr("for",Y);this.selectedElements=0;this.elementCount=0;this.setBootstrap2Compatible(this.settings.bootstrap2Compatible);this.setFilterTextClear(this.settings.filterTextClear);this.setFilterPlaceHolder(this.settings.filterPlaceHolder);this.setMoveSelectedLabel(this.settings.moveSelectedLabel);this.setMoveAllLabel(this.settings.moveAllLabel);this.setRemoveSelectedLabel(this.settings.removeSelectedLabel);this.setRemoveAllLabel(this.settings.removeAllLabel);this.setMoveOnSelect(this.settings.moveOnSelect);this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove);this.setSelectedListLabel(this.settings.selectedListLabel);this.setNonSelectedListLabel(this.settings.nonSelectedListLabel);this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix);this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight);Q(this);this.setShowFilterInputs(this.settings.showFilterInputs);this.setNonSelectedFilter(this.settings.nonSelectedFilter);this.setSelectedFilter(this.settings.selectedFilter);this.setInfoText(this.settings.infoText);this.setInfoTextFiltered(this.settings.infoTextFiltered);this.setInfoTextEmpty(this.settings.infoTextEmpty);this.setFilterOnValues(this.settings.filterOnValues);this.element.hide();P(this);S(this);return this.element},setBootstrap2Compatible:function(X,Y){this.settings.bootstrap2Compatible=X;if(X){this.container.removeClass("row").addClass("row-fluid bs2compatible");this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6");this.container.find(".clear1, .clear2").removeClass("btn-default btn-xs").addClass("btn-mini");this.container.find("input, select").removeClass("form-control");this.container.find(".btn").removeClass("btn-default");this.container.find(".moveall > i, .move > i").removeClass("glyphicon glyphicon-arrow-right").addClass("icon-arrow-right");this.container.find(".removeall > i, .remove > i").removeClass("glyphicon glyphicon-arrow-left").addClass("icon-arrow-left")}else{this.container.removeClass("row-fluid bs2compatible").addClass("row");this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6");this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-default btn-xs");this.container.find("input, select").addClass("form-control");this.container.find(".btn").addClass(this.settings.buttonClass);this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("glyphicon glyphicon-arrow-right");this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("glyphicon glyphicon-arrow-left")}if(Y){S(this)}return this.element},setFilterTextClear:function(X,Y){this.settings.filterTextClear=X;this.elements.filterClear1.html(X);this.elements.filterClear2.html(X);if(Y){S(this)}return this.element},setFilterPlaceHolder:function(X,Y){this.settings.filterPlaceHolder=X;this.elements.filterInput1.attr("placeholder",X);this.elements.filterInput2.attr("placeholder",X);if(Y){S(this)}return this.element},setMoveSelectedLabel:function(X,Y){this.settings.moveSelectedLabel=X;this.elements.moveButton.attr("title",X);if(Y){S(this)}return this.element},setMoveAllLabel:function(X,Y){this.settings.moveAllLabel=X;this.elements.moveAllButton.attr("title",X);if(Y){S(this)}return this.element},setRemoveSelectedLabel:function(X,Y){this.settings.removeSelectedLabel=X;this.elements.removeButton.attr("title",X);if(Y){S(this)}return this.element},setRemoveAllLabel:function(X,Y){this.settings.removeAllLabel=X;this.elements.removeAllButton.attr("title",X);if(Y){S(this)}return this.element},setMoveOnSelect:function(X,Z){if(R){X=true}this.settings.moveOnSelect=X;if(this.settings.moveOnSelect){this.container.addClass("moveonselect");var Y=this;this.elements.select1.on("change",function(){K(Y)});this.elements.select2.on("change",function(){I(Y)})}else{this.container.removeClass("moveonselect");this.elements.select1.off("change");this.elements.select2.off("change")}if(Z){S(this)}return this.element},setPreserveSelectionOnMove:function(X,Y){if(R){X=false}this.settings.preserveSelectionOnMove=X;if(Y){S(this)}return this.element},setSelectedListLabel:function(X,Y){this.settings.selectedListLabel=X;if(X){this.elements.label2.show().html(X)}else{this.elements.label2.hide().html(X)}if(Y){S(this)}return this.element},setNonSelectedListLabel:function(X,Y){this.settings.nonSelectedListLabel=X;if(X){this.elements.label1.show().html(X)}else{this.elements.label1.hide().html(X)}if(Y){S(this)}return this.element},setHelperSelectNamePostfix:function(X,Y){this.settings.helperSelectNamePostfix=X;if(X){this.elements.select1.attr("name",this.originalSelectName+X+"1");this.elements.select2.attr("name",this.originalSelectName+X+"2")}else{this.elements.select1.removeAttr("name");this.elements.select2.removeAttr("name")}if(Y){S(this)}return this.element},setSelectOrMinimalHeight:function(X,Z){this.settings.selectorMinimalHeight=X;var Y=this.element.height();if(this.element.height()<X){Y=X}this.elements.select1.height(Y);this.elements.select2.height(Y);if(Z){S(this)}return this.element},setShowFilterInputs:function(X,Y){if(!X){this.setNonSelectedFilter("");this.setSelectedFilter("");S(this);this.elements.filterInput1.hide();this.elements.filterInput2.hide()}else{this.elements.filterInput1.show();this.elements.filterInput2.show()}this.settings.showFilterInputs=X;if(Y){S(this)}return this.element},setNonSelectedFilter:function(X,Y){if(this.settings.showFilterInputs){this.settings.nonSelectedFilter=X;this.elements.filterInput1.val(X);if(Y){S(this)}return this.element}},setSelectedFilter:function(X,Y){if(this.settings.showFilterInputs){this.settings.selectedFilter=X;this.elements.filterInput2.val(X);if(Y){S(this)}return this.element}},setInfoText:function(X,Y){this.settings.infoText=X;if(Y){S(this)}return this.element},setInfoTextFiltered:function(X,Y){this.settings.infoTextFiltered=X;if(Y){S(this)}return this.element},setInfoTextEmpty:function(X,Y){this.settings.infoTextEmpty=X;if(Y){S(this)}return this.element},setFilterOnValues:function(X,Y){this.settings.filterOnValues=X;if(Y){S(this)}return this.element},getContainer:function(){return this.container},refresh:function(X){Q(this);if(!X){D(this,1);D(this,2)}else{G(this)}S(this)},destroy:function(){this.container.remove();this.element.show();V.data(this,"plugin_"+E,null);return this.element}};V.fn[E]=function(Z){var X=arguments;if(Z===T||typeof Z==="object"){return this.each(function(){if(!V(this).is("select")){V(this).find("select").each(function(b,a){V(a).bootstrapDualListbox(Z)})}else{if(!V.data(this,"plugin_"+E)){V.data(this,"plugin_"+E,new N(this,Z))}}})}else{if(typeof Z==="string"&&Z[0]!=="_"&&Z!=="init"){var Y;this.each(function(){var a=V.data(this,"plugin_"+E);if(a instanceof N&&typeof a[Z]==="function"){Y=a[Z].apply(a,Array.prototype.slice.call(X,1))}});return Y!==T?Y:this}}}})(jQuery,window,document);