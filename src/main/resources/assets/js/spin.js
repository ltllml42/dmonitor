(function(A,B){if(typeof exports=="object"){module.exports=B()}else{if(typeof define=="function"&&define.amd){define(B)}else{A.Spinner=B()}}}(this,function(){var P=["webkit","Moz","ms","O"],I={},N;function D(R,T){var S=document.createElement(R||"div"),Q;for(Q in T){S[Q]=T[Q]}return S}function J(R){for(var S=1,Q=arguments.length;S<Q;S++){R.appendChild(arguments[S])}return R}var O=(function(){var Q=D("style",{type:"text/css"});J(document.getElementsByTagName("head")[0],Q);return Q.sheet||Q.styleSheet}());function F(T,V,Q,W){var R=["opacity",V,~~(T*100),Q,W].join("-"),X=0.01+Q/W*100,U=Math.max(1-(1-T)/V*(100-X),T),Y=N.substring(0,N.indexOf("Animation")).toLowerCase(),S=Y&&"-"+Y+"-"||"";if(!I[R]){O.insertRule("@"+S+"keyframes "+R+"{0%{opacity:"+U+"}"+X+"%{opacity:"+T+"}"+(X+0.01)+"%{opacity:1}"+(X+V)%100+"%{opacity:"+T+"}100%{opacity:"+U+"}}",O.cssRules.length);I[R]=1}return R}function H(R,U){var Q=R.style,S,T;U=U.charAt(0).toUpperCase()+U.slice(1);for(T=0;T<P.length;T++){S=P[T]+U;if(Q[S]!==undefined){return S}}if(Q[U]!==undefined){return U}}function L(R,S){for(var Q in S){R.style[H(R,Q)||Q]=S[Q]}return R}function C(T){for(var R=1;R<arguments.length;R++){var S=arguments[R];for(var Q in S){if(T[Q]===undefined){T[Q]=S[Q]}}}return T}function A(R){var Q={x:R.offsetLeft,y:R.offsetTop};while((R=R.offsetParent)){Q.x+=R.offsetLeft,Q.y+=R.offsetTop}return Q}function B(R,Q){return typeof R=="string"?R:R[Q%R.length]}var G={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",position:"absolute"};function K(Q){this.opts=C(Q||{},K.defaults,G)}K.defaults={};C(K.prototype,{spin:function(a){this.stop();var c=this,S=c.opts,U=c.el=L(D(0,{className:S.className}),{position:S.position,width:0,zIndex:S.zIndex}),b=S.radius+S.length+S.width;L(U,{left:S.left,top:S.top});if(a){a.insertBefore(U,a.firstChild||null)}U.setAttribute("role","progressbar");c.lines(U,c.opts);if(!N){var Q=0,Z=(S.lines-1)*(1-S.direction)/2,T,X=S.fps,W=X/S.speed,V=(1-S.opacity)/(W*S.trail/100),Y=W/S.lines;(function R(){Q++;for(var d=0;d<S.lines;d++){T=Math.max(1-(Q+(S.lines-d)*Y)%W*V,S.opacity);c.opacity(U,d*S.direction+Z,T,S)}c.timeout=c.el&&setTimeout(R,~~(1000/X))})()}return c},stop:function(){var Q=this.el;if(Q){clearTimeout(this.timeout);if(Q.parentNode){Q.parentNode.removeChild(Q)}this.el=undefined}return this},lines:function(S,R){var V=0,T=(R.lines-1)*(1-R.direction)/2,U;function Q(W,X){return L(D(),{position:"absolute",width:(R.length+R.width)+"px",height:R.width+"px",background:W,boxShadow:X,transformOrigin:"left",transform:"rotate("+~~(360/R.lines*V+R.rotate)+"deg) translate("+R.radius+"px,0)",borderRadius:(R.corners*R.width>>1)+"px"})}for(;V<R.lines;V++){U=L(D(),{position:"absolute",top:1+~(R.width/2)+"px",transform:R.hwaccel?"translate3d(0,0,0)":"",opacity:R.opacity,animation:N&&F(R.opacity,R.trail,T+V*R.direction,R.lines)+" "+1/R.speed+"s linear infinite"});if(R.shadow){J(U,L(Q("#000","0 0 4px #000"),{top:2+"px"}))}J(S,J(U,Q(B(R.color,V),"0 0 1px rgba(0,0,0,.1)")))}return S},opacity:function(Q,R,S){if(R<Q.childNodes.length){Q.childNodes[R].style.opacity=S}}});function M(){function Q(R,S){return D("<"+R+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',S)}O.addRule(".spin-vml","behavior:url(#default#VML)");K.prototype.lines=function(U,S){var W=S.length+S.width,X=2*W;function Z(){return L(Q("group",{coordsize:X+" "+X,coordorigin:-W+" "+-W}),{width:X,height:X})}var Y=-(S.width+S.length)*2+"px",V=L(Z(),{position:"absolute",top:Y,left:Y}),R;function T(a,c,b){J(V,J(L(Z(),{rotation:360/S.lines*a+"deg",left:~~c}),J(L(Q("roundrect",{arcsize:S.corners}),{width:W,height:S.width,left:S.radius,top:-S.width>>1,filter:b}),Q("fill",{color:B(S.color,a),opacity:S.opacity}),Q("stroke",{opacity:0}))))}if(S.shadow){for(R=1;R<=S.lines;R++){T(R,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(R=1;R<=S.lines;R++){T(R)}return J(U,V)};K.prototype.opacity=function(S,U,V,R){var T=S.firstChild;R=R.shadow&&R.lines||0;if(T&&U+R<T.childNodes.length){T=T.childNodes[U+R];T=T&&T.firstChild;T=T&&T.firstChild;if(T){T.opacity=V}}}}var E=L(D("group"),{behavior:"url(#default#VML)"});if(!H(E,"transform")&&E.adj){M()}else{N=H(E,"animation")}return K}));