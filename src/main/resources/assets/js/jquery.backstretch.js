/* Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function(C,B,F){C.fn.backstretch=function(H,G){if(H===F||H.length===0){C.error("No images were supplied for Backstretch")}if(C(B).scrollTop()===0){B.scrollTo(0,0)}return this.each(function(){var I=C(this),J=I.data("backstretch");if(J){if(typeof H=="string"&&typeof J[H]=="function"){J[H](G);return}G=C.extend(J.options,G);J.destroy(true)}J=new E(this,H,G);I.data("backstretch",J)})};C.backstretch=function(H,G){return C("body").backstretch(H,G).data("backstretch")};C.expr[":"].backstretch=function(G){return C(G).data("backstretch")!==F};C.fn.backstretch.defaults={centeredX:true,centeredY:true,duration:5000,fade:0};var A={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}};var E=function(H,K,J){this.options=C.extend({},C.fn.backstretch.defaults,J||{});this.images=C.isArray(K)?K:[K];C.each(this.images,function(){C("<img />")[0].src=this});this.isBody=H===document.body;this.$container=C(H);this.$root=this.isBody?D?C(B):C(document):this.$container;var L=this.$container.children(".backstretch").first();this.$wrap=L.length?L:C('<div class="backstretch"></div>').css(A.wrap).appendTo(this.$container);if(!this.isBody){var I=this.$container.css("position"),G=this.$container.css("zIndex");this.$container.css({position:I==="static"?"relative":I,zIndex:G==="auto"?0:G,background:"none"});this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&D?"fixed":"absolute"});this.index=0;this.show(this.index);C(B).on("resize.backstretch",C.proxy(this.resize,this)).on("orientationchange.backstretch",C.proxy(function(){if(this.isBody&&B.pageYOffset===0){B.scrollTo(0,1);this.resize()}},this))};E.prototype={resize:function(){try{var J={left:0,top:0},K=this.isBody?this.$root.width():this.$root.innerWidth(),H=K,M=this.isBody?(B.innerHeight?B.innerHeight:this.$root.height()):this.$root.innerHeight(),G=H/this.$img.data("ratio"),I;if(G>=M){I=(G-M)/2;if(this.options.centeredY){J.top="-"+I+"px"}}else{G=M;H=G*this.$img.data("ratio");I=(H-K)/2;if(this.options.centeredX){J.left="-"+I+"px"}}this.$wrap.css({width:K,height:M}).find("img:not(.deleteable)").css({width:H,height:G}).css(J)}catch(L){}return this},show:function(I){if(Math.abs(I)>this.images.length-1){return}var J=this,G=J.$wrap.find("img").addClass("deleteable"),H={relatedTarget:J.$container[0]};J.$container.trigger(C.Event("backstretch.before",H),[J,I]);this.index=I;clearInterval(J.interval);J.$img=C("<img />").css(A.img).bind("load",function(L){var M=this.width||C(L.target).width(),K=this.height||C(L.target).height();C(this).data("ratio",M/K);C(this).fadeIn(J.options.speed||J.options.fade,function(){G.remove();if(!J.paused){J.cycle()}C(["after","show"]).each(function(){J.$container.trigger(C.Event("backstretch."+this,H),[J,I])})});J.resize()}).appendTo(J.$wrap);J.$img.attr("src",J.images[I]);return J},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1)},pause:function(){this.paused=true;return this},resume:function(){this.paused=false;this.next();return this},cycle:function(){if(this.images.length>1){clearInterval(this.interval);this.interval=setInterval(C.proxy(function(){if(!this.paused){this.next()}},this),this.options.duration)}return this},destroy:function(G){C(B).off("resize.backstretch orientationchange.backstretch");clearInterval(this.interval);if(!G){this.$wrap.remove()}this.$container.removeData("backstretch")}};var D=(function(){var L=navigator.userAgent,K=navigator.platform,I=L.match(/AppleWebKit\/([0-9]+)/),J=!!I&&I[1],N=L.match(/Fennec\/([0-9]+)/),G=!!N&&N[1],M=L.match(/Opera Mobi\/([0-9]+)/),H=!!M&&M[1],P=L.match(/MSIE ([0-9]+)/),O=!!P&&P[1];return !(((K.indexOf("iPhone")>-1||K.indexOf("iPad")>-1||K.indexOf("iPod")>-1)&&J&&J<534)||(B.operamini&&({}).toString.call(B.operamini)==="[object OperaMini]")||(M&&H<7458)||(L.indexOf("Android")>-1&&J&&J<533)||(G&&G<6)||("palmGetResource" in B&&J&&J<534)||(L.indexOf("MeeGo")>-1&&L.indexOf("NokiaBrowser/8.5.0")>-1)||(O&&O<=6))}())}(jQuery,window));