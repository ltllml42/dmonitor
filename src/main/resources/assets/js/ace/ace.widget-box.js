(function(C,D){var B=function(F,G){this.$box=C(F);var E=this;this.reload=function(){var I=this.$box;var H=false;if(I.css("position")=="static"){H=true;I.addClass("position-relative")}I.append('<div class="widget-box-overlay"><i class="'+ace.vars["icon"]+'loading-icon fa fa-spinner fa-spin fa-2x white"></i></div>');I.one("reloaded.ace.widget",function(){I.find(".widget-box-overlay").remove();if(H){I.removeClass("position-relative")}})};this.close=function(){var H=this.$box;var I=300;H.fadeOut(I,function(){H.trigger("closed.ace.widget");H.remove()})};this.toggle=function(L,I){var R=this.$box;var J=R.find(".widget-body");var P=null;var S=typeof L!=="undefined"?L:(R.hasClass("collapsed")?"show":"hide");var N=S=="show"?"shown":"hidden";if(typeof I==="undefined"){I=R.find("> .widget-header a[data-action=collapse]").eq(0);if(I.length==0){I=null}}if(I){P=I.find(ace.vars[".icon"]).eq(0);var K;var O=null;var H=null;if((O=P.attr("data-icon-show"))){H=P.attr("data-icon-hide")}else{if(K=P.attr("class").match(/fa\-(.*)\-(up|down)/)){O="fa-"+K[1]+"-down";H="fa-"+K[1]+"-up"}}}var M=250;var Q=200;if(S=="show"){if(P){P.removeClass(O).addClass(H)}J.hide();R.removeClass("collapsed");J.slideDown(M,function(){R.trigger(N+".ace.widget")})}else{if(P){P.removeClass(H).addClass(O)}J.slideUp(Q,function(){R.addClass("collapsed");R.trigger(N+".ace.widget")})}};this.hide=function(){this.toggle("hide")};this.show=function(){this.toggle("show")};this.fullscreen=function(){var I=this.$box.find("> .widget-header a[data-action=fullscreen]").find(ace.vars[".icon"]).eq(0);var H=null;var J=null;if((H=I.attr("data-icon1"))){J=I.attr("data-icon2")}else{H="fa-expand";J="fa-compress"}if(!this.$box.hasClass("fullscreen")){I.removeClass(H).addClass(J);this.$box.addClass("fullscreen");A(this.$box,true)}else{I.addClass(H).removeClass(J);this.$box.removeClass("fullscreen");A(this.$box,false)}this.$box.trigger("fullscreened.ace.widget")}};C.fn.widget_box=function(G,E){var H;var F=this.each(function(){var J=C(this);var K=J.data("widget_box");var I=typeof G==="object"&&G;if(!K){J.data("widget_box",(K=new B(this,I)))}if(typeof G==="string"){H=K[G](E)}});return(H===D)?F:H};C(document).on("click.ace.widget",".widget-header a[data-action]",function(G){G.preventDefault();var J=C(this);var I=J.closest(".widget-box");if(I.length==0||I.hasClass("ui-sortable-helper")){return}var E=I.data("widget_box");if(!E){I.data("widget_box",(E=new B(I.get(0))))}var F=J.data("action");if(F=="collapse"){var K=I.hasClass("collapsed")?"show":"hide";var H;I.trigger(H=C.Event(K+".ace.widget"));if(H.isDefaultPrevented()){return}E.toggle(K,J)}else{if(F=="close"){var H;I.trigger(H=C.Event("close.ace.widget"));if(H.isDefaultPrevented()){return}E.close()}else{if(F=="reload"){J.blur();var H;I.trigger(H=C.Event("reload.ace.widget"));if(H.isDefaultPrevented()){return}E.reload()}else{if(F=="fullscreen"){var H;I.trigger(H=C.Event("fullscreen.ace.widget"));if(H.isDefaultPrevented()){return}E.fullscreen()}else{if(F=="settings"){I.trigger("setting.ace.widget")}}}}}});function A(F,G){var H=F.find(".widget-main");C(window).off("resize.widget.scroll");var I=ace.vars["old_ie"]||ace.vars["touch"];if(G){var J=H.data("ace_scroll");if(J){H.data("save_scroll",{size:J["size"],lock:J["lock"],lock_anyway:J["lock_anyway"]})}var E=F.height()-F.find(".widget-header").height()-10;E=parseInt(E);H.css("min-height",E);if(!I){if(J){H.ace_scroll("update",{"size":E,"mouseWheelLock":true,"lockAnyway":true})}else{H.ace_scroll({"size":E,"mouseWheelLock":true,"lockAnyway":true})}H.ace_scroll("enable").ace_scroll("reset")}else{if(J){H.ace_scroll("disable")}H.css("max-height",E).addClass("overflow-scroll")}C(window).on("resize.widget.scroll",function(){var L=F.height()-F.find(".widget-header").height()-10;L=parseInt(L);H.css("min-height",L);if(!I){H.ace_scroll("update",{"size":L}).ace_scroll("reset")}else{H.css("max-height",L).addClass("overflow-scroll")}})}else{H.css("min-height","");var K=H.data("save_scroll");if(K){H.ace_scroll("update",{"size":K["size"],"mouseWheelLock":K["lock"],"lockAnyway":K["lock_anyway"]}).ace_scroll("enable").ace_scroll("reset")}if(!I){if(!K){H.ace_scroll("disable")}}else{H.css("max-height","").removeClass("overflow-scroll")}}}})(window.jQuery);