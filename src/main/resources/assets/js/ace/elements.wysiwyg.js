(function(A,B){A.fn.ace_wysiwyg=function(G,H){var F=A.extend({speech_button:true,wysiwyg:{}},G);var E=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"];var C={"font":{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"fa fa-font",title:"Font"},"fontSize":{values:{5:"Huge",3:"Normal",1:"Small"},icon:"fa fa-text-height",title:"Font Size"},"bold":{icon:"fa fa-bold",title:"Bold (Ctrl/Cmd+B)"},"italic":{icon:"fa fa-italic",title:"Italic (Ctrl/Cmd+I)"},"strikethrough":{icon:"fa fa-strikethrough",title:"Strikethrough"},"underline":{icon:"fa fa-underline",title:"Underline"},"insertunorderedlist":{icon:"fa fa-list-ul",title:"Bullet list"},"insertorderedlist":{icon:"fa fa-list-ol",title:"Number list"},"outdent":{icon:"fa fa-outdent",title:"Reduce indent (Shift+Tab)"},"indent":{icon:"fa fa-indent",title:"Indent (Tab)"},"justifyleft":{icon:"fa fa-align-left",title:"Align Left (Ctrl/Cmd+L)"},"justifycenter":{icon:"fa fa-align-center",title:"Center (Ctrl/Cmd+E)"},"justifyright":{icon:"fa fa-align-right",title:"Align Right (Ctrl/Cmd+R)"},"justifyfull":{icon:"fa fa-align-justify",title:"Justify (Ctrl/Cmd+J)"},"createLink":{icon:"fa fa-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},"unlink":{icon:"fa fa-chain-broken",title:"Remove Hyperlink"},"insertImage":{icon:"fa fa-picture-o",title:"Insert picture",button_text:'<i class="'+ace.vars["icon"]+'fa fa-file"></i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:true},"foreColor":{values:E,title:"Change Color"},"backColor":{values:E,title:"Change Background Color"},"undo":{icon:"fa fa-undo",title:"Undo (Ctrl/Cmd+Z)"},"redo":{icon:"fa fa-repeat",title:"Redo (Ctrl/Cmd+Y)"},"viewSource":{icon:"fa fa-code",title:"View Source"}};var D=F.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];this.each(function(){var K=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ';for(var J in D){if(D.hasOwnProperty(J)){var L=D[J];if(L===null){K+=' </div> <div class="btn-group"> ';continue}if(typeof L=="string"&&L in C){L=C[L];L.name=D[J]}else{if(typeof L=="object"&&L.name in C){L=A.extend(C[L.name],L)}else{continue}}var R="className" in L?L.className:"btn-default";switch(L.name){case"font":K+=' <a class="btn btn-sm '+R+' dropdown-toggle" data-toggle="dropdown" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i><i class="'+ace.vars["icon"]+'fa fa-angle-down icon-on-right"></i></a> ';K+=' <ul class="dropdown-menu dropdown-light dropdown-caret">';for(var N in L.values){if(L.values.hasOwnProperty(N)){K+=' <li><a data-edit="fontName '+L.values[N]+'" style="font-family:\''+L.values[N]+"'\">"+L.values[N]+"</a></li> "}}K+=" </ul>";break;case"fontSize":K+=' <a class="btn btn-sm '+R+' dropdown-toggle" data-toggle="dropdown" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i>&nbsp;<i class="'+ace.vars["icon"]+'fa fa-angle-down icon-on-right"></i></a> ';K+=' <ul class="dropdown-menu dropdown-light dropdown-caret"> ';for(var M in L.values){if(L.values.hasOwnProperty(M)){K+=' <li><a data-edit="fontSize '+M+'"><font size="'+M+'">'+L.values[M]+"</font></a></li> "}}K+=" </ul> ";break;case"createLink":K+=' <div class="btn-group"> <a class="btn btn-sm '+R+' dropdown-toggle" data-toggle="dropdown" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i></a> ';K+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">							 <div class="input-group">								<input class="form-control" placeholder="'+L.placeholder+'" type="text" data-edit="'+L.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+L.button_class+'" type="button">'+L.button_text+"</button>								</span>							 </div>						</div> </div>";break;case"insertImage":K+=' <div class="btn-group"> <a class="btn btn-sm '+R+' dropdown-toggle" data-toggle="dropdown" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i></a> ';K+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">							 <div class="input-group">								<input class="form-control" placeholder="'+L.placeholder+'" type="text" data-edit="'+L.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+L.button_insert_class+'" type="button">'+L.button_insert+"</button>								</span>							 </div>";if(L.choose_file&&"FileReader" in window){K+='<div class="space-2"></div>							 <label class="center block no-margin-bottom">								<button class="btn btn-sm '+L.button_class+' wysiwyg-choose-file" type="button">'+L.button_text+'</button>								<input type="file" data-edit="'+L.name+'" />							  </label>'}K+=" </div> </div>";break;case"foreColor":case"backColor":K+=' <select class="hide wysiwyg_colorpicker" title="'+L.title+'"> ';A.each(L.values,function(T,S){K+=' <option value="'+S+'">'+S+"</option> "});K+=" </select> ";K+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+L.name+'" /> ';break;case"viewSource":K+=' <a class="btn btn-sm '+R+'" data-view="source" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i></a> ';break;default:K+=' <a class="btn btn-sm '+R+'" data-edit="'+L.name+'" title="'+L.title+'"><i class="'+ace.vars["icon"]+L.icon+'"></i></a> ';break}}}K+=" </div> ";var Q;if(F.speech_button&&"onwebkitspeechchange" in (Q=document.createElement("input"))){K+=' <input class="wysiwyg-speech-input" type="text" data-edit="inserttext" x-webkit-speech />'}Q=null;K+=" </div> ";if(F.toolbar_place){K=F.toolbar_place.call(this,K)}else{K=A(this).before(K).prev()}K.find("a[title]").tooltip({animation:false,container:"body"});K.find(".dropdown-menu input[type=text]").on("click",function(){return false}).on("change",function(){A(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(S){if(S.which==27){this.value="";A(this).change()}else{if(S.which==13){S.preventDefault();S.stopPropagation();A(this).change()}}});K.find("input[type=file]").prev().on(ace.click_event,function(S){A(this).next().click()});K.find(".wysiwyg_colorpicker").each(function(){A(this).ace_colorpicker({pull_right:true}).change(function(){A(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:false,container:"body"})});var P=A(this);var O=false;K.find("a[data-view=source]").on("click",function(T){T.preventDefault();if(!O){A("<textarea />").css({"width":P.outerWidth(),"height":P.outerHeight()}).val(P.html()).insertAfter(P);P.hide();A(this).addClass("active")}else{var S=P.next();P.html(S.val()).show();S.remove();A(this).removeClass("active")}O=!O});var I=A.extend({},{activeToolbarClass:"active",toolbarSelector:K},F.wysiwyg||{});A(this).wysiwyg(I)});return this}})(window.jQuery);