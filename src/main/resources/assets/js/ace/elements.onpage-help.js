window.Onpage_Help=function(N){var f=window.jQuery||null;if(f==null){return}N=N||{};var S={include_all:true,icon_1:"fa fa-question",icon_2:"fa fa-lightbulb-o",base:"",code_highlight:(!!window.Rainbow?"rainbow":(!!window.Prism?"prism":null)),add_panels:true,panel_content_selector:".info-section",panel_content_title:".info-title"};this.settings=f.extend({},S,N);var a=this.settings["base"];var e=document.all&&!window.atob;var b={};var Z={};var Y={};var B=0;var X=false;var M=false;var c=this,Q=this;var J="";var K=null;var R,G;var d=function(){if(!K){return}var h=-1;f(document).off("focusin.ace.help").on("focusin.ace.help",function(i){if(!(K[0]==i.target||f.contains(K[0],i.target))){K.focus()}if(i.target==document&&h>-1){f("body,html").scrollTop(h);h=-1}});f(window).on("blur.ace.help",function(){h=f(window).scrollTop()})};var L=function(){f(document).off("focusin.ace.help");f(window).off("blur.ace.help")};this.toggle=function(){if(M){c.disable()}else{c.enable()}};this.enable=function(){if(M){return}if(typeof Q.settings.before_enable==="function"&&Q.settings.before_enable.call(c)===false){return}M=true;f(".onpage-help-backdrop, .onpage-help-section").removeClass("hidden");J=document.body.style.overflowX;document.body.style.overflowX="hidden";T();d();if(typeof Q.settings.after_enable==="function"){Q.settings.after_enable.call(c)}};this.disable=function(){if(!M){return}if(typeof Q.settings.before_disable==="function"&&Q.settings.before_disable.call(c)){return}M=false;f(".onpage-help-backdrop, .onpage-help-section").addClass("hidden");document.body.style.overflowX=J;L();if(typeof Q.settings.after_disable==="function"){Q.settings.after_disable.call(c)}};this.is_active=function(){return M};this.show_section_help=function(h){I(h,true)};this.init=function(){if(X){return}K=f('<div class="onpage-help-container" id="onpage-help-container" tabindex="-1" />').appendTo("body");K.append('<div class="onpage-help-backdrop hidden" />');f(window).on("resize.onpage_help",function(){if(!M){return}T();if(V!=null&&V.hasClass("in")){E();C()}});X=true};this.init();this.update_sections=function(){H(true)};function T(){if(!M){return}H();R=document.body.scrollHeight-2;G=document.body.scrollWidth-2;for(var h in b){if(b.hasOwnProperty(h)){A(h)}}for(var h in b){if(b.hasOwnProperty(h)){g(h)}}}function H(j){if(!(j===true||B==0)){return}if(j===true){K.find(".onpage-help-section").remove()}b={};Z={};B=0;var k=0,i=0;var h=f("*").contents().filter(function(){return this.nodeType==8});f(h).each(function(){var l;if((l=f.trim(this.data).match(/#section\s*:\s*([\w\d\-\.\/]+)/i))){var m=l[1];if(!(m in b)){b[m]=this}}if((l=f.trim(this.data).match(/\/section\s*:\s*([\w\d\-\.\/]+)/i))){var m=l[1];if(!(m in Z)&&(m in b)){Z[m]=this;B++}}})}function A(n){if(!(n in b)||!(n in Z)){return}var r=1000000,s=1000000,k=-1000000,l=-1000000;var p=false;var i=[];var q=b[n];var o=Z[n];while(q!=o){q=q.nextSibling;if(q==null){break}else{if(q.nodeType==1){i.push(q)}}}var j=i.length;if(j>0&&!Q.settings["include_all"]){i=j==1?[i[0]]:[i[0],i[j-1]]}f(i).each(function(){var x=f(this);if(x.is(":hidden")){return}var t=x.offset();var u=x.outerWidth();var v=x.outerHeight();if(!t||!u||!v){return}p=true;if(t.left<r){r=t.left}if(t.left+u>k){k=t.left+u}if(t.top<s){s=t.top}if(t.top+v>l){l=t.top+v}});if(!p){Y[n]={is_hidden:true};return}r-=1;s-=1;k+=1;l+=1;var h=k-r,m=l-s;if(r+h<2||r>G||s+m<2||s>R){Y[n]={is_hidden:true};return}Y[n]={"left":parseInt(r),"top":parseInt(s),"width":parseInt(h),"height":parseInt(m)}}function g(i){if(!(i in Y)||!K){return}var h=K.find('.onpage-help-section[data-section="'+i+'"]').eq(0);if(h.length==0){h=f('<a class="onpage-help-section" href="#" />').appendTo(K);if(e){h.append('<span class="ie-hover-fix" />')}if(Q.settings.icon_1){h.append('<i class="help-icon-1 '+Q.settings.icon_1+'"></i>')}if(Q.settings.icon_2){h.append('<i class="help-icon-2 '+Q.settings.icon_2+'"></i>')}h.attr("data-section",i);h.on("click",function(k){k.preventDefault();I(i)})}var j=Y[i];if(j["is_hidden"]===true){h.addClass("hidden");return}h.css({left:j.left,top:j.top,width:j.width,height:j.height});h.removeClass("hidden");h.removeClass("help-section-small help-section-smaller");if(j.height<55||j.width<55){h.addClass("help-section-smaller")}else{if(j.height<75||j.width<75){h.addClass("help-section-small")}}}var F=[];var D=-1;var U=null;var W=0;var V=null;function C(){if(!U){return}var h=U[0];var j=h.scrollHeight<=h.clientHeight;var i=!!f.event.special.mousewheel?"mousewheel.ace.help":"mousewheel.ace.help DOMMouseScroll.ace.help";U.parent().off(i).on(i,function(k){if(j){k.preventDefault()}else{k.deltaY=k.deltaY||0;var l=(k.deltaY>0||k.originalEvent.detail<0||k.originalEvent.wheelDelta>0)?1:-1;if(l==-1&&h.scrollTop+h.clientHeight>=h.scrollHeight){k.preventDefault()}else{if(l==1&&h.scrollTop<=0){k.preventDefault()}}}})}function E(){if(!U){return}var h=parseInt(V.find(".modal-dialog").css("margin-top"));h=h+110+parseInt(h/2);W=parseInt(f(window).innerHeight()-h+40);U.css({"max-height":W})}function I(k,i){if(V==null){V=f('<div id="onpage-help-modal" class="modal onpage-help-modal" tabindex="-1" role="dialog" aria-labelledby="HelpModalDialog" aria-hidden="true">			  <div class="modal-dialog modal-lg">				<div class="modal-content">					<div class="modal-header">					  <div class="pull-right onpage-help-modal-buttons">						<button aria-hidden="true" data-navdir="up" type="button" class="disabled btn btn-white btn-success btn-sm"><i class="ace-icon fa fa-level-up fa-flip-horizontal bigger-125 icon-only"></i></button>						&nbsp;						<button aria-hidden="true" data-navdir="back" type="button" class="disabled btn btn-white btn-info btn-sm"><i class="ace-icon fa fa-arrow-left icon-only"></i></button>						<button aria-hidden="true" data-navdir="forward" type="button" class="disabled btn btn-white btn-info  btn-sm"><i class="ace-icon fa fa-arrow-right icon-only"></i></button>						&nbsp;						<button aria-hidden="true" data-dismiss="modal" class="btn btn-white btn-danger btn-sm" type="button"><i class="ace-icon fa fa-times icon-only"></i></button>					  </div>					  <h4 class="modal-title">Help Dialog</h4>					</div>					<div class="modal-body"><div class="onpage-help-content"></div></div>				</div>			  </div>			</div>').appendTo("body");U=V.find(".modal-body");U.css({"overflow-y":"auto","overflow-x":"hidden"});V.css({"overflow":"hidden"}).on("show.bs.modal",function(){L()}).on("hidden.bs.modal",function(){d()});V.find(".onpage-help-modal-buttons").on("click","button[data-navdir]",function(){var l=f(this).attr("data-navdir");if(l=="back"){if(D>0){D--;I(F[D],false)}}else{if(l=="forward"){if(D<F.length-1){D++;I(F[D],false)}}else{if(l=="up"){var n=f(this),m;if(n.hasClass("disabled")||!(m=n.attr("data-url"))){return}I(m,true)}}}})}if(!V.hasClass("in")){if(document.body.lastChild!=V[0]){f(document.body).append(V)}V.modal("show");E()}V.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>');var h=f(".onpage-help-content");h.addClass("hidden");f(document.body).removeClass("modal-open");var j=k.match(/file\:(.*?)\:(.+)/i);if(j&&j.length==3){P(j[2],j[1],false);return}k=k.replace(/^#/g,"");if(typeof Q.settings.section_url==="function"){url=Q.settings.section_url.call(c,k)}f.ajax({url:url,dataType:"text"}).done(function(r){var t="",Ab="";if(typeof Q.settings.section_title==="function"){t=Q.settings.section_title.call(c,r,k,url)}else{var n=function(Ac){return Ac.replace(/[\-\.\(\)\=\"\'\\\/]/g,function(Ad,Ae){return"\\"+Ad})};var x=k;while(t.length==0){var q='\\<([a-z][a-z0-9]*)(?:\\s+)(?:[^\\<\\>]+?)data\\-id\\=\\"\\#'+n(x)+'\\"(?:[^\\>]*)\\>([\\s\\S]*?)</\\1>';var o=new RegExp(q,"im");var z=r.match(q);if(z&&z[2]){t=z[2];break}var s;if((s=x.lastIndexOf("."))>-1){x=x.substr(0,s)}else{break}}}V.find(".modal-title").html(f.trim(t)||"&nbsp;");if(typeof Q.settings.section_content==="function"){Ab=Q.settings.section_content.call(c,r,k,url)}else{var p="<!-- #section:"+k+" -->";var l=r.indexOf(p);var m=r.indexOf("<!-- /section:"+k+" -->",l);if(l==-1||m==-1){V.find(".modal-title").html("&nbsp;");return}Ab=r.substring(l+p.length+1,m)}if(typeof Q.settings.code_highlight==="function"){Ab=Q.settings.code_highlight.call(c,Ab)}else{Ab=Ab.replace(/\<pre((?:(?:.*?)(?:data\-language=["'](?:[\w\d]+)["'])(?:.*?))|(?:(?:.*?)(?:class=["'](?:.*?)language\-(?:[\w\d]+)(?:.*?)["'])(?:.*?)))\>([\s\S]+?)\<\/pre\>/ig,function(Ac,Ad,Ae){return"<pre"+(Ad)+">"+Ae.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</pre>"})}if(typeof Q.settings.img_url==="function"){Ab=Ab.replace(/\<img(?:(?:.*?)src=["']([^"']+)["'])/ig,function(Ac,Ae){var Ad=Q.settings.img_url.call(c,Ae);return Ac.replace(Ae,Ad)})}h.empty().append(Ab);if(typeof Q.settings.code_highlight==="function"){Q.settings.code_highlight.call(c,h)}else{if(Q.settings.code_highlight==="rainbow"){try{Rainbow.color(h[0])}catch(u){}}else{if(Q.settings.code_highlight==="prism"){try{h.find('pre[class*="language-"],code[class*="language-"]').each(function(){Prism.highlightElement(this)})}catch(u){}}}}if(Q.settings.add_panels){h.find(Q.settings.panel_content_selector).each(function(){var Ac=f(this).prevAll(Q.settings.panel_content_title);if(Ac.length==0){return false}Ac=Ac.attr("class","panel-title").wrapInner('<a class="help-panel-toggle" href="#" data-parent="#" data-toggle="collapse" />').wrap('<div class="panel-heading" />').closest(".panel-heading");f(this).wrap('<div class="panel panel-default panel-help"><div class="panel-collapse collapse"><div class="panel-body"></div></div></div>');f(this).closest(".panel").prepend(Ac)});var y=f(".panel-group").length;h.find(".panel").each(function(){if(f(this).parent().hasClass("panel-group")){return}var Ae="panel-group-help-"+(++y);var Ad=f('<div class="panel-group" />').insertBefore(this);Ad.attr("id",Ae);var Ac=0;Ad.siblings(".panel").appendTo(Ad);Ad.find(".help-panel-toggle").append('<i class="pull-right ace-icon fa fa-plus" data-icon-show="ace-icon fa fa-plus" data-icon-hide="ace-icon fa fa-minus"></i>').attr("data-parent","#"+Ae).each(function(){Ac++;f(this).attr("data-target","#"+Ae+"-"+Ac);f(this).closest(".panel-heading").siblings(".panel-collapse").attr("id",Ae+"-"+Ac)})});f(document).off("click.help-panel-toggle",".help-panel-toggle").on("click.help-panel-toggle",".help-panel-toggle",function(Ac){Ac.preventDefault()})}h.removeClass("hidden");var w=h.find("img:visible");if(w.length>0){var v=0;w.off(".help_body_scroll").on("load.help_body_scroll error.help_body_scroll",function(){f(this).off(".help_body_scroll");v++;if(v>=w.length){C()}})}C();h.find(".panel > .panel-collapse").on("shown.bs.collapse hidden.bs.collapse",function(){C()});O(k,i);var Aa=-1;if((Aa=k.lastIndexOf("."))>-1){k=k.substr(0,Aa);V.find("button[data-navdir=up]").removeClass("disabled").attr("data-url",k)}else{V.find("button[data-navdir=up]").addClass("disabled").removeAttr("data-url").blur()}}).fail(function(){V.find(".modal-title").find(".fa-spin").remove().end().find(".hidden").children().unwrap()})}f(document).on("click",'.onpage-help-modal a[href^="http"]',function(){f(this).attr("target","_blank")});f(document).on("click",".help-more",function(i){i.preventDefault();var h=f(this).attr("href");I(h)});function O(i,h){if(h!==false){if(F.length>0){F=F.slice(0,D+1)}if(F[F.length-1]!=i){F.push(i);D=F.length-1}}if(D==0){V.find("button[data-navdir=back]").addClass("disabled").blur()}else{V.find("button[data-navdir=back]").removeClass("disabled")}if(D==F.length-1){V.find("button[data-navdir=forward]").addClass("disabled").blur()}else{V.find("button[data-navdir=forward]").removeClass("disabled")}}f(document).on("click",".open-file[data-open-file]",function(){V.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>');f(".onpage-help-content").addClass("hidden");var i=f(this).attr("data-path")||f(this).text();var h=f(this).attr("data-open-file");P(i,h,true)});function P(j,h,k){var i=j;if(typeof Q.settings.file_url==="function"){j=Q.settings.file_url.call(c,j,h)}f.ajax({url:j,dataType:"text"}).done(function(m){O("file:"+h+":"+i,k);V.find("button[data-navdir=up]").addClass("disabled").blur();V.find(".modal-title").html(i).wrapInner("<code />");if(h!="json"){if(h!="css"){m=m.replace(/\n[\t]{1,}/g,function(o,r){return o.replace(/\t/g,"  ")})}else{m=m.replace(/\t/g,"  ")}}else{h="javascript";m=JSON.stringify(JSON.parse(m),null,2)}m=m.replace(/\>/g,"&gt;").replace(/\</g,"&lt;");var l=f(".onpage-help-content");l.removeClass("hidden").empty();if(typeof Q.settings.code_highlight==="function"){m=Q.settings.code_highlight.call(c,m,h);l.html(m)}else{if(Q.settings.code_highlight==="rainbow"){try{Rainbow.color(m,h,function(o){l.html(o).wrapInner('<pre data-language="'+h+'" />')})}catch(n){}}else{if(Q.settings.code_highlight==="prism"){try{m=Prism.highlight(m,Prism.languages[h],h);l.html(m).wrapInner('<pre class="language-'+h+'" />')}catch(n){}}}}})}};