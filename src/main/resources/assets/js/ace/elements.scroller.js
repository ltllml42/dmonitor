(function(A,B){var C=function(U,N){var s=this;var Q=A.extend({},A.fn.ace_scroll.defaults,N);this.size=0;this.lock=false;this.lock_anyway=false;this.$element=A(U);this.element=U;var f=true;var Aa=false;var R=false;var M=false;var L=null,Ad=null;var P=null,K=null,Af=null,u=null;var W=null;var T=0,Ag=0,H=0,d=0,q=true;var e=false;var c="";var b=false;var g=0;var y,S,J,z,I,V;var Y=1;var D=false;var j=false;var m="onmouseup" in window?window:"html";var r=Q.dragEvent||false;var E=N.scrollEvent||false;var w=Q.detached||false;var X=Q.updatePos||false;var v=Q.hideOnIdle||false;var a=Q.hideDelay||1500;var l=false;var F=Q.observeContent||false;var Ac=0;var o=true;this.create=function(Aj){if(M){return}if(Aj){Q=A.extend({},A.fn.ace_scroll.defaults,Aj)}this.size=parseInt(this.$element.attr("data-size"))||Q.size||200;f=!Q["horizontal"];y=f?"top":"left";S=f?"height":"width";J=f?"maxHeight":"maxWidth";z=f?"clientHeight":"clientWidth";I=f?"scrollTop":"scrollLeft";V=f?"scrollHeight":"scrollWidth";this.$element.addClass("ace-scroll");if(this.$element.css("position")=="static"){D=this.element.style.position;this.element.style.position="relative"}else{D=false}var Al=null;if(!w){this.$element.wrapInner('<div class="scroll-content" />');this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"></div></div>')}else{Al=A('<div class="scroll-track scroll-detached"><div class="scroll-bar"></div></div>').appendTo("body")}L=this.$element;if(!w){L=this.$element.find(".scroll-content").eq(0)}if(!f){L.wrapInner("<div />")}Ad=L.get(0);if(w){P=Al;O()}else{P=this.$element.find(".scroll-track").eq(0)}K=P.find(".scroll-bar").eq(0);Af=P.get(0);u=K.get(0);W=u.style;if(!f){P.addClass("scroll-hz")}if(Q.styleClass){c=Q.styleClass;P.addClass(c);b=!!c.match(/scroll\-left|scroll\-top/)}if(g==0){P.show();n()}P.hide();P.on("mousedown",h);K.on("mousedown",i);L.on("scroll",function(){if(q){Ag=parseInt(Math.round(this[I]*Y));W[y]=Ag+"px"}q=false;if(E){this.$element.trigger("scroll",[Ad])}});if(Q.mouseWheel){this.lock=Q.mouseWheelLock;this.lock_anyway=Q.lockAnyway;this.$element.on(!!A.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(Ao){if(Aa){return}Ab(true);if(!R){return !s.lock_anyway}if(j){j=false;A("html").off(".ace_scroll");A(m).off(".ace_scroll");if(r){s.$element.trigger("drag.end")}}Ao.deltaY=Ao.deltaY||0;var Aq=(Ao.deltaY>0||Ao.originalEvent.detail<0||Ao.originalEvent.wheelDelta>0)?1:-1;var Am=false;var Ap=Ad[z],Ar=Ad[I];if(!s.lock){if(Aq==-1){Am=(Ad[V]<=Ar+Ap)}else{Am=(Ar==0)}}s.move_bar(true);var An=parseInt(Ap/8);if(An<80){An=80}if(An>s.size){An=s.size}An+=1;Ad[I]=Ar-(Aq*An);return Am&&!s.lock_anyway})}var Ah=ace.vars["touch"]&&"ace_drag" in A.event.special&&Q.touchDrag;if(Ah){var Ai="",Ak=Ah?"ace_drag":"swipe";this.$element.on(Ak+".ace_scroll",function(Am){if(Aa){Am.retval.cancel=true;return}Ab(true);if(!R){Am.retval.cancel=this.lock_anyway;return}Ai=Am.direction;if((f&&(Ai=="up"||Ai=="down"))||(!f&&(Ai=="left"||Ai=="right"))){var An=f?Am.dy:Am.dx;if(An!=0){if(Math.abs(An)>20&&Ah){An=An*2}s.move_bar(true);Ad[I]=Ad[I]+An}}})}if(v){P.addClass("idle-hide")}if(F){P.on("mouseenter.ace_scroll",function(){l=true;Ab(false)}).on("mouseleave.ace_scroll",function(){l=false;if(j==false){p()}})}this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(Am){o=true;if(F){Ab(true)}else{if(Q.hoverReset){s.reset(true)}}P.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){P.removeClass("scroll-hover")});if(!f){L.children(0).css(S,this.size)}L.css(J,this.size);Aa=false;M=true};this.is_active=function(){return R};this.is_enabled=function(){return !Aa};this.move_bar=function(Ah){q=Ah};this.get_track=function(){return Af};this.reset=function(Ak){if(Aa){return}if(!M){this.create()}var Ah=this.size;if(Ak&&!o){return}o=false;if(w){var Ai=parseInt(Math.round((parseInt(L.css("border-top-width"))+parseInt(L.css("border-bottom-width")))/2.5));Ah-=Ai}var Aj=f?Ad[V]:Ah;if((f&&Aj==0)||(!f&&this.element.scrollWidth==0)){P.removeClass("scroll-active");return}var Al=f?Ah:Ad.clientWidth;if(!f){L.children(0).css(S,Ah)}L.css(J,this.size);if(Aj>Al){R=true;P.css(S,Al).show();Y=parseFloat((Al/Aj).toFixed(5));T=parseInt(Math.round(Al*Y));d=parseInt(Math.round(T/2));H=Al-T;Ag=parseInt(Math.round(Ad[I]*Y));W[S]=T+"px";W[y]=Ag+"px";P.addClass("scroll-active");if(g==0){n()}if(!e){if(Q.reset){Ad[I]=0;W[y]=0}e=true}if(w){O()}}else{R=false;P.hide();P.removeClass("scroll-active");L.css(J,"")}return};this.disable=function(){Ad[I]=0;W[y]=0;Aa=true;R=false;P.hide();this.$element.addClass("scroll-disabled");P.removeClass("scroll-active");L.css(J,"")};this.enable=function(){Aa=false;this.$element.removeClass("scroll-disabled")};this.destroy=function(){R=false;Aa=false;M=false;this.$element.removeClass("ace-scroll scroll-disabled scroll-active");this.$element.off(".ace_scroll");if(!w){if(!f){L.find("> div").children().unwrap()}L.children().unwrap();L.remove()}P.remove();if(D!==false){this.element.style.position=D}if(Ae!=null){clearTimeout(Ae);Ae=null}};this.modify=function(Ah){if(Ah){Q=A.extend({},Q,Ah)}this.destroy();this.create();o=true;this.reset(true)};this.update=function(Ah){if(Ah){Q=A.extend({},Q,Ah)}this.size=Ah.size||this.size;this.lock=Ah.mouseWheelLock||this.lock;this.lock_anyway=Ah.lockAnyway||this.lock_anyway;if(Ah.styleClass!=B){if(c){P.removeClass(c)}c=Ah.styleClass;if(c){P.addClass(c)}b=!!c.match(/scroll\-left|scroll\-top/)}};this.start=function(){Ad[I]=0};this.end=function(){Ad[I]=Ad[V]};this.hide=function(){P.hide()};this.show=function(){P.show()};this.update_scroll=function(){q=false;W[y]=Ag+"px";Ad[I]=parseInt(Math.round(Ag/Y))};function h(Aj){Aj.preventDefault();Aj.stopPropagation();var Ah=P.offset();var Ak=Ah[y];var Ai=f?Aj.pageY:Aj.pageX;if(Ai>Ak+Ag){Ag=Ai-Ak-T+d;if(Ag>H){Ag=H}}else{Ag=Ai-Ak-d;if(Ag<0){Ag=0}}s.update_scroll()}var k=-1,G=-1;function i(Ah){Ah.preventDefault();Ah.stopPropagation();if(f){G=k=Ah.pageY}else{G=k=Ah.pageX}j=true;A("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",t);A(m).off("mouseup.ace_scroll").on("mouseup.ace_scroll",Z);P.addClass("active");if(r){s.$element.trigger("drag.start")}}function t(Ah){Ah.preventDefault();Ah.stopPropagation();if(f){G=Ah.pageY}else{G=Ah.pageX}if(G-k+Ag>H){G=k+H-Ag}else{if(G-k+Ag<0){G=k-Ag}}Ag=Ag+(G-k);k=G;if(Ag<0){Ag=0}else{if(Ag>H){Ag=H}}s.update_scroll()}function Z(Ah){Ah.preventDefault();Ah.stopPropagation();j=false;A("html").off(".ace_scroll");A(m).off(".ace_scroll");P.removeClass("active");if(r){s.$element.trigger("drag.end")}if(R&&v&&!l){p()}}var Ae=null;var x=0;function Ab(Ah){var Ai=+new Date();if(F&&Ai-x>1000){var Aj=Ad[V];if(Ac!=Aj){Ac=Aj;o=true;s.reset(true)}x=Ai}if(R&&v){if(Ae!=null){clearTimeout(Ae);Ae=null}P.addClass("not-idle");if(!l&&Ah==true){p()}}}function p(){if(Ae!=null){clearTimeout(Ae);Ae=null}Ae=setTimeout(function(){Ae=null;P.removeClass("not-idle")},a)}function n(){P.css("visibility","hidden").addClass("scroll-hover");if(f){g=parseInt(P.outerWidth())||0}else{g=parseInt(P.outerHeight())||0}P.css("visibility","").removeClass("scroll-hover")}this.track_size=function(){if(g==0){n()}return g};function O(){if(X===false){return}var Ah=L.offset();var Aj=Ah.left;var Ai=Ah.top;if(f){if(!b){Aj+=(L.outerWidth()-g)}}else{if(!b){Ai+=(L.outerHeight()-g)}}if(X===true){P.css({top:parseInt(Ai),left:parseInt(Aj)})}else{if(X==="left"){P.css("left",parseInt(Aj))}else{if(X==="top"){P.css("top",parseInt(Ai))}}}}this.create();o=true;this.reset(true);Ac=Ad[V];return this};A.fn.ace_scroll=function(G,D){var F;var E=this.each(function(){var I=A(this);var J=I.data("ace_scroll");var H=typeof G==="object"&&G;if(!J){I.data("ace_scroll",(J=new C(this,H)))}if(typeof G==="string"){F=J[G](D)}});return(F===B)?E:F};A.fn.ace_scroll.defaults={"size":200,"horizontal":false,"mouseWheel":true,"mouseWheelLock":false,"lockAnyway":false,"styleClass":false,"observeContent":false,"hideOnIdle":false,"hideDelay":1500,"hoverReset":true,"reset":false,"dragEvent":false,"touchDrag":true,"touchSwipe":false,"scrollEvent":false,"detached":false,"updatePos":true}})(window.jQuery);