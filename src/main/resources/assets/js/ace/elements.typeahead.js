!function(C){var A=function(D,E){this.$element=C(D);this.options=C.extend({},C.fn.bs_typeahead.defaults,E);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=C(this.options.menu);this.shown=false;this.listen()};A.prototype={constructor:A,select:function(){var D=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(D)).change();return this.hide()},updater:function(D){return D},show:function(){var D=C.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:D.top+D.height,left:D.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(D){var E;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}E=C.isFunction(this.source)?this.source(this.query,C.proxy(this.process,this)):this.source;return E?this.process(E):this},process:function(E){var D=this;E=C.grep(E,function(F){return D.matcher(F)});E=this.sorter(E);if(!E.length){return this.shown?this.hide():this}return this.render(E.slice(0,this.options.items)).show()},matcher:function(D){return ~D.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(F){var D=[],H=[],G=[],E;while(E=F.shift()){if(!E.toLowerCase().indexOf(this.query.toLowerCase())){D.push(E)}else{if(~E.indexOf(this.query)){H.push(E)}else{G.push(E)}}}return D.concat(H,G)},highlighter:function(E){var D=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return E.replace(new RegExp("("+D+")","ig"),function(G,F){return"<strong>"+F+"</strong>"})},render:function(E){var D=this;E=C(E).map(function(F,G){F=C(D.options.item).attr("data-value",G);F.find("a").html(D.highlighter(G));return F[0]});E.first().addClass("active");this.$menu.html(E);return this},next:function(D){var E=this.$menu.find(".active").removeClass("active"),F=E.next();if(!F.length){F=C(this.$menu.find("li")[0])}F.addClass("active")},prev:function(E){var F=this.$menu.find(".active").removeClass("active"),D=F.prev();if(!D.length){D=this.$menu.find("li").last()}D.addClass("active")},listen:function(){this.$element.on("focus",C.proxy(this.focus,this)).on("blur",C.proxy(this.blur,this)).on("keypress",C.proxy(this.keypress,this)).on("keyup",C.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",C.proxy(this.keydown,this))}this.$menu.on("click",C.proxy(this.click,this)).on("mouseenter","li",C.proxy(this.mouseenter,this)).on("mouseleave","li",C.proxy(this.mouseleave,this))},eventSupported:function(D){var E=D in this.$element;if(!E){this.$element.setAttribute(D,"return;");E=typeof this.$element[D]==="function"}return E},move:function(D){if(!this.shown){return}switch(D.keyCode){case 9:case 13:case 27:D.preventDefault();break;case 38:D.preventDefault();this.prev();break;case 40:D.preventDefault();this.next();break}D.stopPropagation()},keydown:function(D){this.suppressKeyPressRepeat=~C.inArray(D.keyCode,[40,38,9,13,27]);this.move(D)},keypress:function(D){if(this.suppressKeyPressRepeat){return}this.move(D)},keyup:function(D){switch(D.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}D.stopPropagation();D.preventDefault()},focus:function(D){this.focused=true},blur:function(D){this.focused=false;if(!this.mousedover&&this.shown){this.hide()}},click:function(D){D.stopPropagation();D.preventDefault();this.select();this.$element.focus()},mouseenter:function(D){this.mousedover=true;this.$menu.find(".active").removeClass("active");C(D.currentTarget).addClass("active")},mouseleave:function(D){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}}};var B=C.fn.bs_typeahead;C.fn.bs_typeahead=function(D){return this.each(function(){var F=C(this),G=F.data("bs_typeahead"),E=typeof D=="object"&&D;if(!G){F.data("bs_typeahead",(G=new A(this,E)))}if(typeof D=="string"){G[D]()}})};C.fn.bs_typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};C.fn.bs_typeahead.Constructor=A;C.fn.bs_typeahead.noConflict=function(){C.fn.bs_typeahead=B;return this};C(document).on("focus.bs_typeahead.data-api",'[data-provide="bs_typeahead"]',function(D){var E=C(this);if(E.data("bs_typeahead")){return}E.bs_typeahead(E.data())})}(window.jQuery);